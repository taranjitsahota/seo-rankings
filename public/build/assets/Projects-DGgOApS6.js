import{r as a,G as u,j as e,S as v}from"./app-Br9ufYQC.js";import{A as S}from"./AuthenticatedLayout-CwSJwMcO.js";import"./ApplicationLogo-BYk8DJNW.js";import"./transition-Bh3tVVU4.js";function K({auth:h,projects:x}){const[l,n]=a.useState(""),[p,c]=a.useState(!1),[d,b]=a.useState(null);a.useEffect(()=>{if(l){const s=setTimeout(()=>n(""),3e3);return()=>clearTimeout(s)}},[l]);const r=u({name:"",url:""}),j=s=>{s.preventDefault(),r.post(route("projects.store"),{onSuccess:()=>r.reset()})},t=u({keyword:""}),y=s=>{s.preventDefault(),d&&t.post(route("projects.keywords.store",{project:d.id}),{onSuccess:()=>{t.reset(),c(!1)}})},g=s=>{b(s),c(!0)},[N,i]=a.useState(!1),[o,w]=a.useState(null),f=s=>{w(s),i(!0)},k=()=>{o&&r.delete(route("projects.destroy",{project:o.id}),{onSuccess:()=>{i(!1),n("Project deleted successfully!"),setTimeout(()=>n(""),3e3)}})};return e.jsxs(S,{user:h.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Projects"}),children:[e.jsx(v,{title:"Projects"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create a New Project"}),e.jsxs("form",{onSubmit:j,children:[e.jsx("label",{className:"block mb-2",children:"Project Name"}),e.jsx("input",{type:"text",name:"name",value:r.data.name,onChange:s=>r.setData("name",s.target.value),className:"border w-full p-2 mb-4",required:!0}),r.errors.name&&e.jsx("p",{className:"text-red-500 text-sm",children:r.errors.name}),e.jsx("label",{className:"block mb-2",children:"Project URL"}),e.jsx("input",{type:"url",name:"url",value:r.data.url,onChange:s=>r.setData("url",s.target.value),className:"border w-full p-2 mb-4",required:!0}),r.errors.url&&e.jsx("p",{className:"text-red-500 text-sm",children:r.errors.url}),e.jsx("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded",disabled:r.processing,children:r.processing?"Creating...":"Create"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded shadow mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Project List"}),x.length>0?e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"URL"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Keywords"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:x.map(s=>e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:s.name}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("a",{href:s.url,className:"text-blue-500",target:"_blank",rel:"noopener noreferrer",children:s.url})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:s.keywords&&s.keywords.length>0?e.jsx("ul",{children:s.keywords.map(m=>e.jsx("li",{className:"text-gray-700",children:m.keyword},m.id))}):e.jsx("p",{className:"text-gray-500",children:"No keywords"})}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[e.jsx("button",{onClick:()=>g(s),className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Add Keyword"}),e.jsx("button",{onClick:()=>f(s),className:"bg-red-500 text-white px-4 py-2 rounded ml-2",children:"Delete"})]})]},s.id))})]}):e.jsx("p",{children:"No projects found."})]})]})}),N&&o&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-96",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:["Are you sure you want to delete"," ",e.jsx("span",{className:"text-red-500",children:o.name}),"?"]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>i(!1),className:"bg-gray-500 text-white px-4 py-2 rounded",children:"Cancel"}),e.jsx("button",{onClick:k,className:"bg-red-500 text-white px-4 py-2 rounded",children:"Yes, Delete"})]})]})}),l&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded shadow-lg transition-opacity duration-500",children:l}),p&&d&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-96",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add Keyword to ",d.name]}),e.jsxs("form",{onSubmit:y,children:[e.jsx("label",{className:"block mb-2",children:"Keyword"}),e.jsx("input",{type:"text",name:"keyword",value:t.data.keyword,onChange:s=>t.setData("keyword",s.target.value),className:"border w-full p-2 mb-4",required:!0}),t.errors.keyword&&e.jsx("p",{className:"text-red-500 text-sm",children:t.errors.keyword}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"bg-gray-500 text-white px-4 py-2 rounded",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded",disabled:t.processing,children:t.processing?"Adding...":"Add Keyword"})]})]})]})})]})}export{K as default};
